import{j as s,B as Q,C as P,p as as,f as Cs}from"./ethereum-Dpu0wFLT.js";import{a as i}from"./vendor-BVRmVL55.js";import{c as y,C as z,a as ms,T as vs}from"./ui-CpcQKOpE.js";const As=({onClose:f,ipfsHash:r,onSuccess:v,setToastMessage:F,setToastType:$,setShowToast:E})=>{const[d,O]=i.useState(""),[c,A]=i.useState(!1),[l,b]=i.useState(!1),g=x=>{const j=x.target.value;(j===""||/^\d*\.?\d*$/.test(j))&&O(j)},M=async()=>{A(!0);try{if(!window.ethereum||!d)return;const x=new Q(window.ethereum),j=await x.getSigner(),p=new P(y.NFT_CONTRACT,z.NFT_CONTRACT,x),_=await p.cardIdCounter();let N;for(let m=1;m<=_;m++)if((await p.tokenURI(m)).replace("ipfs://","")===r){N=m;break}if(!N)throw new Error("Token ID not found for this NFT");const G=await p.ownerOf(N),u=await j.getAddress();if(G.toLowerCase()!==u.toLowerCase())throw new Error("You do not own this NFT");const t=p.connect(j);await p.isApprovedForAll(await j.getAddress(),y.TRADING_CONTRACT)||(console.log("Approving trading contract..."),await(await t.setApprovalForAll(y.TRADING_CONTRACT,!0)).wait());const a=new P(y.TRADING_CONTRACT,z.TRADING_CONTRACT,j),o=as(d);await(await a.listCard(N,o)).wait(),b(!0),A(!1)}catch(x){console.error("Error listing card:",x),F("Error listing card: "+x.message),$("error"),E(!0),A(!1)}},w=()=>{v(),f(),window.location.reload()};return s.jsxs("div",{className:"listing-modal-overlay",onClick:l?w:c?void 0:f,style:{cursor:c?"not-allowed":"pointer"},children:[s.jsx("div",{className:"listing-modal-content",onClick:l?w:x=>x.stopPropagation(),children:l?s.jsxs("div",{className:"listing-success",children:[s.jsx("i",{className:"fas fa-check-circle"}),s.jsx("h3",{children:"NFT Listed Successfully!"}),s.jsx("button",{className:"success-ok-button",onClick:w,children:"OK"})]}):s.jsxs("div",{className:`modal-content-container ${c?"fade-out":"fade-in"}`,children:[s.jsx("h3",{children:c?"Listing NFT...":"List Card for Sale"}),c?s.jsx("div",{className:"listing-spinner"}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"price-input-container",children:[s.jsx("input",{type:"text",value:d,onChange:g,placeholder:"Enter price in ETH",className:"price-input"}),s.jsx("span",{className:"eth-label",children:"ETH"})]}),s.jsxs("div",{className:"listing-modal-buttons",children:[s.jsx("button",{className:"cancel-button",onClick:f,disabled:c,children:"Cancel"}),s.jsx("button",{className:"list-button",onClick:M,disabled:!d||c,children:"List"})]})]})]})}),c&&s.jsx("div",{className:"processing-overlay",children:s.jsxs("div",{className:"processing-content",children:[s.jsx("div",{className:"listing-spinner"}),s.jsx("p",{children:"Processing your listing..."})]})})]})},ys=({onClose:f,tokenId:r,onSuccess:v,setToastMessage:F,setToastType:$,setShowToast:E})=>{const[d,O]=i.useState(""),[c,A]=i.useState(""),[l,b]=i.useState(""),[g,M]=i.useState(!1),[w,x]=i.useState(!1),j=u=>{const t=u.target.value;(t===""||/^\d*\.?\d*$/.test(t))&&O(t)},p=u=>{const t=u.target.value;(t===""||/^\d*$/.test(t))&&A(t)},_=u=>{const t=u.target.value;(t===""||/^\d*$/.test(t))&&(t===""||parseInt(t)<=23)&&b(t)},N=async()=>{if(!window.ethereum||!d)return;const u=parseInt(c)||0,t=parseInt(l)||0;if(u===0&&t===0){F("Duration must be greater than 0"),$("error"),E(!0);return}try{M(!0);const a=await new Q(window.ethereum).getSigner(),o=await a.getAddress(),T=new P(y.TRADING_CONTRACT,z.TRADING_CONTRACT,a),m=await T.listings(r);if(m.isActive){if(m.seller.toLowerCase()!==o.toLowerCase())throw new Error("You are not the seller of this NFT");if(m.isAuction)throw new Error("This NFT is already in an auction");console.log("Cancelling current listing..."),await(await T.cancelFixedPriceListing(r)).wait(),console.log("Listing cancelled successfully")}const h=u*24*60*60+t*60*60;if(h>30*24*60*60)throw new Error("Total duration cannot exceed 30 days");const S=as(d);if(S<=as("0"))throw new Error("Starting bid must be greater than 0");console.log("Starting auction with params:",{tokenId:r,startingBidInWei:S.toString(),durationInSeconds:h});const k=await T.startAuction(r,S,h);console.log("Starting auction transaction sent:",k.hash),await k.wait(),console.log("Auction started successfully"),x(!0)}catch(e){console.error("Error starting auction:",e);let a="Error starting auction: ";e.message.includes("user rejected")?a+="Transaction was rejected":e.message.includes("insufficient funds")?a+="Insufficient funds for transaction":e.message.includes("UseAuctionFunctions")?a+="NFT is already part of an auction":e.message.includes("NotOwner")?a+="You are not the owner of this NFT":e.message.includes("NotApproved")?a+="Contract is not approved to handle this NFT":e.message.includes("InactiveListing")?a+="This NFT is not actively listed":a+=e.message||"Unknown error",F(a),$("error"),E(!0)}finally{M(!1)}},G=()=>{v(),f(),window.location.reload()};return s.jsxs("div",{className:"listing-modal-overlay",onClick:w?G:g?void 0:f,style:{cursor:g?"not-allowed":"pointer"},children:[s.jsx("div",{className:"listing-modal-content",onClick:w?G:u=>u.stopPropagation(),children:w?s.jsxs("div",{className:"listing-success",children:[s.jsx("i",{className:"fas fa-check-circle"}),s.jsx("h3",{children:"Auction Started Successfully!"}),s.jsx("button",{className:"success-ok-button",onClick:G,children:"OK"})]}):s.jsxs("div",{className:`modal-content-container ${g?"fade-out":"fade-in"}`,children:[s.jsx("h3",{children:g?"Starting Auction...":"Start Auction"}),g?s.jsx("div",{className:"listing-spinner"}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"price-input-container",children:[s.jsx("input",{type:"text",value:d,onChange:j,placeholder:"Enter starting bid in ETH",className:"price-input"}),s.jsx("span",{className:"eth-label",children:"ETH"})]}),s.jsxs("div",{className:"duration-inputs",children:[s.jsxs("div",{className:"duration-input-container",children:[s.jsx("input",{type:"text",value:c,onChange:p,placeholder:"Days",className:"duration-input"}),s.jsx("span",{className:"duration-label",children:"Days"})]}),s.jsxs("div",{className:"duration-input-container",children:[s.jsx("input",{type:"text",value:l,onChange:_,placeholder:"Hours",className:"duration-input"}),s.jsx("span",{className:"duration-label",children:"Hours"})]}),s.jsx("span",{className:"duration-hint",children:"Enter duration (max 30 days)"})]}),s.jsxs("div",{className:"listing-modal-buttons",children:[s.jsx("button",{className:"cancel-button",onClick:f,disabled:g,children:"Cancel"}),s.jsx("button",{className:"list-button",onClick:N,disabled:!d||!c&&!l||g,children:g?"Starting...":"Start Auction"})]})]})]})}),g&&s.jsx("div",{className:"processing-overlay",children:s.jsxs("div",{className:"processing-content",children:[s.jsx("div",{className:"listing-spinner"}),s.jsx("p",{children:"Processing your auction..."})]})})]})},bs=({ipfsHash:f,metadata:r,onClose:v,account:F,seller:$})=>{var cs,rs,ls;const[E,d]=i.useState(!1),[O,c]=i.useState(!1),[A,l]=i.useState(""),[b,g]=i.useState("success"),[M,w]=i.useState(!1),[x,j]=i.useState(!1),[p,_]=i.useState(!1),[N,G]=i.useState(null),[u,t]=i.useState(!1),[e,a]=i.useState(!1),[o,T]=i.useState(null);i.useState("");const[m,h]=i.useState(0),[S,k]=i.useState(""),[I,Y]=i.useState([]);i.useState(!1),i.useState(!1);const[U,Z]=i.useState(!1),[J,q]=i.useState(!1),[H,ps]=i.useState(!1),V=i.useRef(null);console.log("Rendering ProfileCardDetails with isAuction:",p),i.useEffect(()=>{(async()=>{if(window.ethereum)try{const D=new Q(window.ethereum),ds=await(await D.getSigner()).getAddress(),K=new P(y.NFT_CONTRACT,z.NFT_CONTRACT,D),ts=await K.cardIdCounter();for(let L=1;L<=ts;L++)if((await K.tokenURI(L)).replace("ipfs://","")===f){G(L),console.log("Found matching token ID:",L);try{const R=await K.getPokemonStats(L);T({hp:Number(R.hp),attack:Number(R.attack),defense:Number(R.defense),speed:Number(R.speed),special:Number(R.special),pokemonType:Number(R.pokemonType)})}catch(R){console.error("Error fetching Pokemon stats:",R)}const ss=new P(y.TRADING_CONTRACT,z.TRADING_CONTRACT,D),X=await ss.listings(L);if(console.log("Listing status:",{isActive:X.isActive,isAuction:X.isAuction,seller:X.seller}),j(X.isActive),_(X.isAuction),X.isAuction){console.log("This is an auction");const R=await ss.auctions(L),us=Number(R.endTime);console.log("Auction end time:",new Date(us*1e3).toLocaleString()),h(us);const js=ss.filters.AuctionBid(L),hs=await ss.queryFilter(js);console.log("Number of bids:",hs.length);const Ts=hs.filter(W=>"args"in W).map(async W=>{const ns=await W.getBlock();return{bidder:W.args[1],amount:W.args[2],timestamp:ns.timestamp}}),gs=(await Promise.all(Ts)).sort((W,ns)=>ns.timestamp-W.timestamp);console.log("Sorted bids:",gs),Y(gs)}break}}catch(D){console.error("Error checking listing status:",D)}})();const C=setInterval(()=>{if(m){const D=Math.floor(Date.now()/1e3),B=m-D;if(B<=0)k("Auction ended");else{const ds=Math.floor(B/86400),K=Math.floor(B%(24*60*60)/(60*60)),ts=Math.floor(B%(60*60)/60),L=B%60,is=`${ds}d ${K}h ${ts}m ${L}s`;console.log("Time remaining:",is),k(is)}}},1e3);return()=>clearInterval(C)},[f,m]);const Ns=async()=>{if(!(!window.ethereum||!N)){t(!0);try{const C=await new Q(window.ethereum).getSigner();await(await new P(y.TRADING_CONTRACT,z.TRADING_CONTRACT,C).cancelFixedPriceListing(N)).wait(),l("Listing cancelled successfully"),g("success"),w(!0),a(!0)}catch(n){console.error("Error cancelling listing:",n),l("Error cancelling listing"),g("error"),w(!0)}finally{t(!1)}}},fs=async()=>{if(!(!window.ethereum||!N)){Z(!0);try{const C=await new Q(window.ethereum).getSigner();await(await new P(y.TRADING_CONTRACT,z.TRADING_CONTRACT,C).finalizeAuction(N)).wait(),l("Auction finalized successfully"),g("success"),w(!0),q(!0)}catch(n){console.error("Error finalizing auction:",n);let C="Error finalizing auction: ";n.code==="ACTION_REJECTED"||n.code===4001?C="Transaction was cancelled":n.message.includes("InactiveListing")?C+="This auction is not active":n.message.includes("NotAnAuction")?C+="This item is not part of an auction":n.message.includes("AuctionNotEnded")?C+="The auction has not ended yet":n.message.includes("Unauthorized")?C+="You are not authorized to finalize this auction":C+=n.reason||n.message||"Unknown error",l(C),g("error"),w(!0)}finally{Z(!1)}}},es=n=>`${n.slice(0,6)}...${n.slice(-4)}`,ws=n=>new Date(n*1e3).toLocaleString(),os=()=>{a(!1),v(),window.location.reload()},xs=()=>{var n;(n=V.current)==null||n.scrollIntoView({behavior:"smooth"})};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"product-details-overlay",onClick:u?void 0:()=>{v(),J&&window.location.reload()},style:{cursor:u?"not-allowed":"pointer"},children:s.jsxs("div",{className:"product-details-content",onClick:n=>n.stopPropagation(),style:{maxHeight:"90vh",overflow:"hidden",background:"white",width:"90%",maxWidth:"1200px",borderRadius:"12px",position:"relative"},children:[s.jsx("button",{className:"close-button",onClick:v,children:"×"}),s.jsxs("div",{className:"product-details-scroll-container",style:{height:"100%",overflowY:"auto",padding:"20px"},children:[s.jsxs("div",{className:`product-details-grid ${p?"with-border":""}`,children:[s.jsx("div",{className:"product-image",children:s.jsx(ms,{hash:f,alt:"NFT Item"})}),s.jsxs("div",{className:"product-info",children:[s.jsx("h2",{children:(r==null?void 0:r.name)||"Pokemon Card NFT"}),s.jsx("div",{className:"type-badge-container",children:s.jsx("span",{className:`type-badge ${(rs=(cs=r==null?void 0:r.keyvalues)==null?void 0:cs.Type)==null?void 0:rs.toLowerCase()}`,children:((ls=r==null?void 0:r.keyvalues)==null?void 0:ls.Type)||"Type"})}),s.jsxs("div",{className:"product-price",children:[s.jsx("h3",{children:"Price:"}),s.jsx("span",{children:x?"0.001 ETH":"Not Listed"})]}),s.jsxs("div",{className:"metadata-section",children:[s.jsx("h3",{children:"Details"}),s.jsxs("div",{className:"metadata-grid",children:[s.jsxs("div",{className:"metadata-item",children:[s.jsx("label",{children:"HP"}),s.jsx("span",{children:(o==null?void 0:o.hp)||"Loading..."})]}),s.jsxs("div",{className:"metadata-item",children:[s.jsx("label",{children:"Attack"}),s.jsx("span",{children:(o==null?void 0:o.attack)||"Loading..."})]}),s.jsxs("div",{className:"metadata-item",children:[s.jsx("label",{children:"Defense"}),s.jsx("span",{children:(o==null?void 0:o.defense)||"Loading..."})]}),s.jsxs("div",{className:"metadata-item",children:[s.jsx("label",{children:"Speed"}),s.jsx("span",{children:(o==null?void 0:o.speed)||"Loading..."})]}),s.jsxs("div",{className:"metadata-item",children:[s.jsx("label",{children:"Special"}),s.jsx("span",{children:(o==null?void 0:o.special)||"Loading..."})]}),s.jsxs("div",{className:"metadata-item",children:[s.jsx("label",{children:"Token ID"}),s.jsx("span",{children:N?`#${N}`:f.slice(0,8)})]}),s.jsxs("div",{className:"metadata-item",children:[s.jsx("label",{children:"Owner"}),s.jsx("span",{children:F?es(F):"Unknown"})]}),s.jsxs("div",{className:"metadata-item",children:[s.jsx("label",{children:"Contract"}),s.jsx("span",{children:es(y.NFT_CONTRACT)})]})]})]}),s.jsxs("div",{className:"action-buttons",children:[x?s.jsx("button",{className:"cancel-listing-button",onClick:Ns,disabled:u||p,children:u?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fas fa-spinner fa-spin"}),"Cancelling..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fas fa-times"}),"Cancel Listing"]})}):s.jsxs("button",{className:"list-button",onClick:()=>d(!0),disabled:p,children:[s.jsx("i",{className:"fas fa-tag"}),"List for Sale"]}),p?s.jsxs("button",{className:"view-auction-button",onClick:xs,children:[s.jsx("i",{className:"fas fa-gavel"}),"View Auction"]}):s.jsxs("button",{className:"auction-button",onClick:()=>c(!0),children:[s.jsx("i",{className:"fas fa-gavel"}),"Start Auction"]})]})]})]}),s.jsx("div",{ref:V,children:p&&s.jsxs("div",{children:[s.jsxs("div",{className:"auction-header",children:[s.jsx("h3",{children:"Auction Details"}),s.jsxs("div",{className:"auction-countdown",children:["Time Remaining: ",S]})]}),s.jsxs("div",{className:"current-bids",children:[s.jsxs("h4",{children:["Current Bids (",I.length,")"]}),I.length>0?s.jsx("div",{className:"bids-list",children:I.map((n,C)=>s.jsxs("div",{className:"bid-item",children:[s.jsx("span",{className:"bid-address",children:es(n.bidder.toString())}),s.jsxs("span",{className:"bid-amount",children:[Cs(n.amount)," ETH"]}),s.jsx("span",{className:"bid-time",children:ws(n.timestamp)})]},C))}):s.jsx("div",{className:"no-bids",children:"No bids yet"})]}),S=="Auction ended"&&s.jsx("div",{className:"finalize-auction",children:s.jsx("button",{className:"finalize-auction-button",onClick:fs,disabled:U,children:U?"Finalizing...":"Finalize Auction"})})]})})]})]})}),E&&s.jsx(As,{ipfsHash:f,onClose:()=>d(!1),onSuccess:()=>{d(!1),v()},setToastMessage:l,setToastType:g,setShowToast:w}),O&&N&&s.jsx(ys,{tokenId:N,onClose:()=>c(!1),onSuccess:()=>{c(!1),v()},setToastMessage:l,setToastType:g,setShowToast:w}),H&&s.jsx("div",{className:"bid-processing-overlay",children:s.jsxs("div",{className:"processing-content",children:[s.jsx("div",{className:"listing-spinner"}),s.jsx("p",{children:"Processing your bid..."})]})}),e&&s.jsx("div",{className:"success-popup-overlay",onClick:os,children:s.jsxs("div",{className:"success-popup",onClick:n=>n.stopPropagation(),children:[s.jsx("h3",{children:"Listing Cancelled Successfully!"}),s.jsx("p",{children:"Your NFT listing has been cancelled."}),s.jsx("button",{className:"ok-button",onClick:os,children:"OK"})]})}),u&&s.jsx("div",{className:"processing-overlay"}),s.jsx(vs,{message:A,isVisible:M,onHide:()=>w(!1),type:b})]})},Os=({nftItems:f,account:r})=>{const[v,F]=i.useState(null),[$,E]=i.useState([]),[d,O]=i.useState("all");return i.useEffect(()=>{(async()=>{var A;if(!window.ethereum||!r||f.length===0){E([]);return}try{const l=new Q(window.ethereum),b=r.toLowerCase(),g=new P(y.TRADING_CONTRACT,z.TRADING_CONTRACT,l),M=new P(y.NFT_CONTRACT,z.NFT_CONTRACT,l),w=await M.cardIdCounter();console.log("Total tokens:",w.toString());const x=new Map,j=new Map,p=new Map,_=new Map,N=new Set(f.map(t=>t.ipfs_pin_hash));console.log("Available IPFS hashes:",Array.from(N));for(let t=1;t<=w;t++)try{const e=t.toString(),a=await g.listings(e),o=a.seller.toLowerCase(),T=o===b,m=a.isActive;let h="";try{h=(await M.tokenURI(t)).replace("ipfs://","")}catch{console.log(`Token ${t} URI not available`);continue}if(m&&T||N.has(h)){const I=(await M.ownerOf(t)).toLowerCase(),Y=I===y.TRADING_CONTRACT.toLowerCase(),U=I===b;if(console.log(`Token ${e} detailed status:`,{tokenId:e,ipfsHash:h,owner:I,accountLower:b,isInTradingContract:Y,isOwned:U,listing:{isActive:a.isActive,seller:o,isAuction:a.isAuction,price:(A=a.price)==null?void 0:A.toString(),isMyListing:T}}),m&&T&&!N.has(h)){const J=await(async()=>{var q;try{const H=await fetch(`/api/pinata/data/pinList?hashContains=${h}`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiIzMTdjMDVkZi0wMDIwLTRiMTUtOTM1NC00OThlMzYyZWNhMmUiLCJlbWFpbCI6IjA3MTVzdG9uZUBnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicGluX3BvbGljeSI6eyJyZWdpb25zIjpbeyJkZXNpcmVkUmVwbGljYXRpb25Db3VudCI6MSwiaWQiOiJGUkExIn0seyJkZXNpcmVkUmVwbGljYXRpb25Db3VudCI6MSwiaWQiOiJOWUMxIn1dLCJ2ZXJzaW9uIjoxfSwibWZhX2VuYWJsZWQiOmZhbHNlLCJzdGF0dXMiOiJBQ1RJVkUifSwiYXV0aGVudGljYXRpb25UeXBlIjoic2NvcGVkS2V5Iiwic2NvcGVkS2V5S2V5IjoiZjQ3ZDM5M2E0MDUyYjA1NmY3OWMiLCJzY29wZWRLZXlTZWNyZXQiOiJlNjk4MjQwOGU5NmVlOTA1YTdhYzMyMjE3MjQ5NzMzNGM3YTA0OGIzNzE0NDUzYzhkNTJlYzFiNWNkMTljY2VmIiwiZXhwIjoxNzcwMTM5MzEzfQ.CaT__jSkLWkGSCxFK6oAQutPmYxExdKpe55n4qMeZDc","Content-Type":"application/json"}});if(H.ok){const V=(q=(await H.json()).rows)==null?void 0:q[0];if(V!=null&&V.metadata)return V.metadata}}catch(H){console.error(`Error fetching Pinata metadata for token ${e}:`,H)}return{name:`Token #${e}`,keyvalues:{Type:"Unknown"}}})();_.set(h,{ipfs_pin_hash:h,metadata:J}),console.log(`Added additional NFT for token ${e}:`,{ipfsHash:h,metadata:J})}x.set(e,h),j.set(h,e),p.set(h,{tokenId:e,isListed:m,isAuction:a.isAuction,seller:o,isMyListing:T,isOwned:U||Y&&T})}}catch(e){console.error(`Error processing token ${t}:`,e)}console.log("Token to IPFS mapping:",Object.fromEntries(x)),console.log("IPFS to Token mapping:",Object.fromEntries(j)),console.log("NFT Statuses:",Object.fromEntries(p)),console.log("Additional NFTs:",Object.fromEntries(_));const u=[...f,...Array.from(_.values())].filter(t=>{var o,T,m,h,S,k;const e=p.get(t.ipfs_pin_hash),a=j.get(t.ipfs_pin_hash);if(e&&(t.isListed=e.isListed,t.isAuction=e.isAuction,t.seller=e.seller,t.isOwned=e.isOwned,t.tokenId=e.tokenId),console.log("Processing NFT for display:",{name:(o=t.metadata)==null?void 0:o.name,ipfsHash:t.ipfs_pin_hash,tokenId:a,currentFilter:d,status:e?{isListed:e.isListed,isAuction:e.isAuction,isMyListing:e.isMyListing,seller:e.seller,isOwned:e.isOwned}:"No status found"}),!e)return console.log(`No status found for NFT ${(T=t.metadata)==null?void 0:T.name}`),!1;switch(d){case"all":const I=e.isOwned||e.isListed&&e.isMyListing,Y=e.isOwned?"owned by me":e.isListed&&e.isMyListing?"active listing by me":"not owned or listed by me";return console.log(`${I?"Including":"Excluding"} ${(m=t.metadata)==null?void 0:m.name}:`,{reason:Y,tokenId:a,isOwned:e.isOwned,isListed:e.isListed,isMyListing:e.isMyListing,seller:e.seller}),I;case"listed":const U=e.isListed&&e.isMyListing&&!e.isAuction;return console.log(`${U?"Including":"Excluding"} ${(h=t.metadata)==null?void 0:h.name} from listed:`,{isMyListing:e.isMyListing,isListed:e.isListed,isAuction:e.isAuction,seller:e.seller}),U;case"auction":const Z=e.isListed&&e.isMyListing&&e.isAuction;return console.log(`${Z?"Including":"Excluding"} ${(S=t.metadata)==null?void 0:S.name} from auction:`,{isMyListing:e.isMyListing,isListed:e.isListed,isAuction:e.isAuction,seller:e.seller}),Z;case"not-listed":const J=e.isOwned&&!e.isListed;return console.log(`${J?"Including":"Excluding"} ${(k=t.metadata)==null?void 0:k.name} from not-listed:`,{isOwned:e.isOwned,isListed:e.isListed,seller:e.seller}),J;default:return!1}});console.log("Final filtered NFTs:",u.map(t=>{var e;return{name:(e=t.metadata)==null?void 0:e.name,ipfsHash:t.ipfs_pin_hash,tokenId:t.tokenId,status:p.get(t.ipfs_pin_hash)}})),E(u)}catch(l){console.error("Error filtering NFTs:",l)}})()},[f,r,d]),s.jsxs("div",{className:"main-container",children:[s.jsxs("aside",{className:"sidebar",children:[s.jsxs("div",{className:"filter-section",children:[s.jsx("h3",{children:"My Collection"}),s.jsx("p",{className:"wallet-address",children:r?`${r.slice(0,6)}...${r.slice(-4)}`:"Not connected"})]}),s.jsxs("div",{className:"filter-section",children:[s.jsx("h3",{children:"Status"}),s.jsxs("div",{className:"filter-option",children:[s.jsx("input",{type:"radio",id:"status-all",name:"status",checked:d==="all",onChange:()=>O("all")}),s.jsx("label",{htmlFor:"status-all",children:"All"})]}),s.jsxs("div",{className:"filter-option",children:[s.jsx("input",{type:"radio",id:"status-listed",name:"status",checked:d==="listed",onChange:()=>O("listed")}),s.jsx("label",{htmlFor:"status-listed",children:"Listed"})]}),s.jsxs("div",{className:"filter-option",children:[s.jsx("input",{type:"radio",id:"status-auction",name:"status",checked:d==="auction",onChange:()=>O("auction")}),s.jsx("label",{htmlFor:"status-auction",children:"On Auction"})]}),s.jsxs("div",{className:"filter-option",children:[s.jsx("input",{type:"radio",id:"status-not-listed",name:"status",checked:d==="not-listed",onChange:()=>O("not-listed")}),s.jsx("label",{htmlFor:"status-not-listed",children:"Not Listed"})]})]})]}),s.jsx("div",{className:"content-area",children:s.jsx("section",{id:"product1",className:"section-p1",children:s.jsx("div",{className:"pro-container",children:$.length===0?s.jsx("div",{children:"No NFTs found"}):$.map(c=>{var A,l,b;return s.jsxs("div",{className:"pro profile-card",onClick:()=>F(c),children:[s.jsx(ms,{hash:c.ipfs_pin_hash,alt:"NFT Item"}),s.jsxs("div",{className:"des",children:[s.jsx("span",{children:((l=(A=c.metadata)==null?void 0:A.keyvalues)==null?void 0:l.Type)||"Type"}),s.jsxs("div",{className:"name-price",children:[s.jsx("h5",{children:((b=c.metadata)==null?void 0:b.name)||"Pokemon Card NFT"}),s.jsx("p",{className:"price",children:c.price?`${c.price} ETH`:"0.001 ETH"})]})]})]},c.ipfs_pin_hash)})})})}),v&&s.jsx(bs,{ipfsHash:v.ipfs_pin_hash,metadata:v.metadata,onClose:()=>F(null),account:r})]})};export{Os as default};
